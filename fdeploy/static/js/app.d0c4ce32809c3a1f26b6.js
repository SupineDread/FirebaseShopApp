webpackJsonp([1],{"28O5":function(t,e){},"5GxX":function(t,e){},"7zck":function(t,e){},Hywb:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("7+uW"),a=s("Dd8w"),r=s.n(a),i={methods:{toggleDrawer:function(){this.drawer=!this.drawer},logout:function(){var t=this;this.$store.dispatch("firebaseLogout").then(function(){t.$store.commit("setUser"),t.$store.commit("setRole","guest"),t.$router.push("/login")})}}},n={name:"guest",mixins:[i],data:function(){return{drawer:!1,items:[{title:this.$t("navigation.home"),icon:"home",to:"/"},{title:this.$t("navigation.login"),icon:"forward",to:"/login"},{title:this.$t("navigation.register"),icon:"account_circle",to:"/register"}]}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-toolbar",{attrs:{app:"",dark:"",color:"primary"}},[s("v-toolbar-side-icon",{on:{click:t.toggleDrawer}}),t._v(" "),s("v-toolbar-title",[s("v-btn",{attrs:{color:"dark",to:"/"}},[t._v("\n        VueJS + Firebase\n      ")])],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[s("v-btn",{attrs:{flat:"",to:"/login"}},[t._v("\n        "+t._s(t.$t("navigation.login"))+"\n      ")]),t._v(" "),s("v-btn",{attrs:{flat:"",to:"/register"}},[t._v("\n        "+t._s(t.$t("navigation.register"))+"\n      ")])],1)],1),t._v(" "),s("v-navigation-drawer",{attrs:{overlay:"",absolute:"",value:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("v-list",{staticClass:"pt-0",attrs:{dense:""}},[s("v-divider"),t._v(" "),t._l(t.items,function(e){return s("v-list-tile",{key:e.title,on:{click:function(s){t.$router.push(e.to)}}},[s("v-list-tile-action",[s("v-icon",[t._v(t._s(e.icon))])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v("\n            "+t._s(e.title)+"\n          ")])],1)],1)}),t._v(" "),s("v-divider"),t._v(" "),s("v-list-tile",{on:{click:t.toggleDrawer}},[s("v-list-tile-action",[s("v-icon",[t._v("arrow_back")])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v("\n            "+t._s(t.$t("navigation.close_menu"))+"\n          ")])],1)],1)],2)],1)],1)},staticRenderFns:[]},l=s("VU/8")(n,c,!1,null,null,null).exports,d={name:"admin-navigation",mixins:[i],data:function(){return{drawer:!1,items:[{title:this.$t("navigation.admin"),icon:"store",to:"/admin"},{title:this.$t("navigation.home"),icon:"home",to:"/"},{title:this.$t("navigation.shop"),icon:"shopping_basket",to:"/shop"}]}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-toolbar",{attrs:{app:"",dark:"",color:"primary"}},[s("v-toolbar-side-icon",{on:{click:t.toggleDrawer}}),t._v(" "),s("v-toolbar-title",[s("v-btn",{attrs:{color:"dark",to:"/"}},[t._v("Vuejs 2 Firestore")])],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[s("v-btn",{attrs:{flat:"",to:"/admin"}},[t._v(t._s(t.$t("navigation.admin")))]),t._v(" "),s("v-btn",{attrs:{flat:"",to:"/shop"}},[t._v(t._s(t.$t("navigation.shop")))]),t._v(" "),s("v-btn",{attrs:{flat:""},on:{click:t.logout}},[t._v(t._s(t.$t("navigation.logout")))])],1)],1),t._v(" "),s("v-navigation-drawer",{attrs:{overlay:"",absolute:"",value:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("v-list",{staticClass:"pt-0",attrs:{dense:""}},[s("v-divider"),t._v(" "),t._l(t.items,function(e,o){return s("v-list-tile",{key:e.title,on:{click:function(s){t.$router.push(e.to)}}},[s("v-list-tile-action",{key:o},[s("v-icon",[t._v(t._s(e.icon))])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v(t._s(e.title))])],1)],1)}),t._v(" "),s("v-list-tile",{on:{click:t.toggleDrawer}},[s("v-list-tile-action",[s("v-icon",[t._v("arrow_back")])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v("\n            "+t._s(t.$t("navigation.close_menu"))+"\n          ")])],1)],1),t._v(" "),s("v-divider"),t._v(" "),s("v-list-tile",{on:{click:t.logout}},[s("v-list-tile-action",[s("v-icon",[t._v("forward")])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v("\n            "+t._s(t.$t("navigation.logout"))+"\n          ")])],1)],1)],2)],1)],1)},staticRenderFns:[]},m=s("VU/8")(d,u,!1,null,null,null).exports,v={name:"customer-navigation",mixins:[i],data:function(){return{drawer:!1,items:[{title:this.$t("navigation.home"),icon:"home",to:"/"},{title:this.$t("navigation.shop"),icon:"shopping_basket",to:"/shop"},{title:this.$t("navigation.cart"),icon:"shopping_cart",to:"/cart"},{title:this.$t("navigation.orders"),icon:"view_headline",to:"/orders"}]}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-toolbar",{attrs:{app:"",dark:"",color:"primary"}},[s("v-toolbar-side-icon",{on:{click:t.toggleDrawer}}),t._v(" "),s("v-toolbar-title",[s("v-btn",{attrs:{color:"dark",to:"/"}},[t._v("\n        Vuejs 2 Firestore\n      ")])],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[s("v-btn",{attrs:{flat:"",to:"/orders"}},[t._v(t._s(t.$t("navigation.orders")))]),t._v(" "),s("v-btn",{attrs:{flat:"",to:"/cart"}},[t._v("\n        "+t._s(t.$t("navigation.products_in_cart",{number:t.$store.state.cartModule.totalProducts}))+"\n      ")]),t._v(" "),s("v-btn",{attrs:{flat:"",to:"/shop"}},[t._v(t._s(t.$t("navigation.shop")))]),t._v(" "),s("v-btn",{attrs:{flat:""},on:{click:t.logout}},[t._v(t._s(t.$t("navigation.logout")))])],1)],1),t._v(" "),s("v-navigation-drawer",{attrs:{overlay:"",absolute:"",value:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("v-list",{staticClass:"pt-0",attrs:{dense:""}},[s("v-divider"),t._v(" "),t._l(t.items,function(e,o){return s("v-list-tile",{key:e.title,on:{click:function(s){t.$router.push(e.to)}}},[s("v-list-tile-action",{key:o},[s("v-icon",[t._v(t._s(e.icon))])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v(t._s(e.title))])],1)],1)}),t._v(" "),s("v-list-tile",{on:{click:t.toggleDrawer}},[s("v-list-tile-action",[s("v-icon",[t._v("arrow_back")])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v("\n            "+t._s(t.$t("navigation.close_menu"))+"\n          ")])],1)],1),t._v(" "),s("v-divider"),t._v(" "),s("v-list-tile",{on:{click:t.logout}},[s("v-list-tile-action",[s("v-icon",[t._v("forward")])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v("\n            "+t._s(t.$t("navigation.logout"))+"\n          ")])],1)],1)],2)],1)],1)},staticRenderFns:[]},h=s("VU/8")(v,p,!1,null,null,null).exports,f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-footer",{attrs:{height:"auto"}},[e("v-card",{staticClass:"indigo lighten-1 white--text text-xs-center",attrs:{flat:"",tile:""}},[e("v-card-text",[this._v("\n      Cloud Firestore es una base de datos flexible y escalable para la programación en servidores, dispositivos móviles y la Web desde Firebase y Google Cloud Platform. Al igual que Firebase Realtime Database, mantiene tus datos sincronizados entre apps cliente a través de agentes de escucha en tiempo real y ofrece asistencia sin conexión para dispositivos móviles y la Web, por lo que puedes compilar apps con capacidad de respuesta que funcionan sin importar la latencia de la red ni la conectividad a Internet. Cloud Firestore también ofrece una integración sin interrupciones con otros productos de Firebase y Google Cloud Platform, incluido Cloud Functions.\n    ")]),this._v(" "),e("v-card-text",[this._v("\n      ©2018 - "),e("strong",[this._v("DevHF.io")])])],1)],1)},staticRenderFns:[]},_=s("VU/8")({name:"app-footer"},f,!1,null,null,null).exports,g=s("NYxO"),b={components:{CustomerNavigation:h,AdminNavigation:m,GuestNavigation:l,AppFooter:_},name:"App",computed:r()({},Object(g.c)(["role"]))},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("v-app",[t.$store.state.loaded?s("v-content",["guest"===t.role?s("guest-navigation"):t._e(),t._v(" "),"admin"===t.role?s("admin-navigation"):t._e(),t._v(" "),"customer"===t.role?s("customer-navigation"):t._e(),t._v(" "),s("v-container",{staticClass:"mt-3 mb-3"},[s("v-alert",{attrs:{type:t.$store.state.alert.type,value:t.$store.state.alert.show}},[t._v("\n          "+t._s(t.$store.state.alert.show)+"\n        ")]),t._v(" "),s("router-view")],1),t._v(" "),s("app-footer")],1):s("v-container",{attrs:{"fill-height":""}},[s("v-layout",{attrs:{flex:"","align-center":"","justify-center":""}},[s("v-progress-circular",{attrs:{indeterminate:"",size:100,width:10,color:"primary"}})],1)],1)],1)],1)},staticRenderFns:[]};var $=s("VU/8")(b,x,!1,function(t){s("PYY3")},null,null).exports,y=s("/ocq"),k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-jumbotron",{attrs:{color:"grey lighten-2"}},[s("v-container",{attrs:{"fill-height":""}},[s("v-layout",{attrs:{"align-center":""}},[s("v-flex",[s("h3",{staticClass:"display-3"},[t._v("\n          "+t._s(t.$t("welcome.title",{app:"Bienvenido a Vue JS + Firebase"}))+"\n        ")]),t._v(" "),s("span",{staticClass:"subheading"},[t._v("\n          "+t._s(t.$t("welcome.content"))+"\n        ")]),t._v(" "),s("v-divider",{staticClass:"my-3"}),t._v(" "),s("div",{staticClass:"title mb-3"},[t._v("\n          "+t._s(t.$t("welcome.call_to_action"))+"\n        ")]),t._v(" "),s("v-btn",{staticClass:"mx-0",attrs:{large:"",color:"primary",to:"/login"}},[t._v("\n          "+t._s(t.$t("welcome.action_button"))+"\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var j=s("VU/8")({name:"Home"},k,!1,function(t){s("PP2P")},"data-v-5f5ffef5",null).exports,w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-snackbar",{attrs:{timeout:t.timeout,color:t.color},model:{value:t.showSnack,callback:function(e){t.showSnack=e},expression:"showSnack"}},[t._v("\n  "+t._s(t.text)+"\n  "),s("v-btn",{attrs:{dark:"",flat:""},on:{click:function(e){t.showSnack=!1}}},[t._v("\n    "+t._s(t.$t("messages.close"))+"\n  ")])],1)},staticRenderFns:[]},C=s("VU/8")({name:"app-snackbar",props:["snackBar","timeout","text"],data:function(){return{color:"primary",mode:"horizontal",showSnack:this.snackBar}}},w,!1,null,null,null).exports,P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-jumbotron",{attrs:{color:"primary",dark:"",height:"50px"}},[s("v-container",{attrs:{"fill-height":""}},[s("v-layout",{attrs:{"align-center":""}},[s("v-flex",{attrs:{"text-xs-center":""}},[s("h3",{staticClass:"display-1"},[t._v("\n            "+t._s(t.$t(t.action+".title"))+"\n          ")])])],1)],1)],1),t._v(" "),s("v-form",{attrs:{id:"nativeForm"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-text-field",{attrs:{label:t.$t("auth.email"),rules:t.emailRules,name:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),s("v-text-field",{attrs:{label:t.$t("auth.password"),rules:t.passwordRules,name:"password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),"register"===t.action?s("v-text-field",{attrs:{label:t.$t("auth.password_confirmation"),rules:t.password_confirmationRules,name:"password_confirmation",type:"password"},model:{value:t.password_confirmation,callback:function(e){t.password_confirmation=e},expression:"password_confirmation"}}):t._e(),t._v(" "),s("v-btn",{attrs:{color:"primary",dark:"",disabled:!t.valid},on:{click:t.submit}},[t._v("\n      "+t._s(t.$t(t.action+".submit"))+"\n    ")])],1)],1)},staticRenderFns:[]},F=s("VU/8")({name:"auth-form",props:{action:""},data:function(){var t=this;return{valid:!1,email:"",emailRules:[function(e){return!!e||t.$t("validations.required",{field:"E-mail"})},function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)||t.$t("validations.email",{field:"E-mail"})}],password:"",passwordRules:[function(e){return!!e||t.$t("validations.required",{field:"Password"})},function(e){return e.length>=7||t.$t("validations.minLength",{field:"Password",length:7})}],password_confirmation:"",password_confirmationRules:[function(e){return!!e||t.$t("validations.required",{field:"Password"})},function(e){return e.length>=7||t.$t("validations.minLength",{field:"Password",length:7})},function(e){return e===t.password||t.$t("validations.password_confirmation")}]}},methods:{submit:function(){this.$emit("process",{email:this.email,password:this.password})}}},P,!1,null,null,null).exports,E={name:"Register",components:{AppSnackbar:C,AuthForm:F},data:function(){return{snackBar:!1,message:"",timeout:5e3}},methods:{register:function(t){var e=this;this.$store.dispatch("firebaseRegister",t).then(function(t){var s={uid:t.user.uid,email:t.user.email,role:"customer"};Jt.collection("users").doc(t.user.uid).set(s).then(function(){e.$store.commit("setRole",s.role),e.$router.push("/")})}).catch(function(t){e.message=t.message.substr(0,70),e.snackBar=!0,setTimeout(function(){e.snackBar=!1},e.timeout)})}}},A={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("AuthForm",{attrs:{action:"register"},on:{process:function(e){t.register(e)}}}),t._v(" "),t.snackBar?s("app-snackbar",{attrs:{snackBar:t.snackBar,text:t.message,timeout:t.timeout}}):t._e()],1)},staticRenderFns:[]},D=s("VU/8")(E,A,!1,null,null,null).exports,U={name:"login",components:{AppSnackbar:C,AuthForm:F},data:function(){return{snackBar:!1,message:"",timeout:5e3}},methods:{login:function(t){var e=this;this.$store.dispatch("firebaseLogin",t).then(function(t){Jt.collection("users").doc(t.user.uid).onSnapshot(function(t){e.$router.push("/")})}).catch(function(t){e.message=t.message.substr(0,200),e.snackBar=!0,setTimeout(function(){e.snackBar=!1},e.timeout)})}}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("AuthForm",{attrs:{action:"login"},on:{process:function(e){t.login(e)}}}),t._v(" "),t.snackBar?s("app-snackbar",{attrs:{snackBar:t.snackBar,text:t.message,timeout:t.timeout}}):t._e()],1)},staticRenderFns:[]},M=s("VU/8")(U,S,!1,null,null,null).exports,R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs12:"",sm3:""}},[s("v-navigation-drawer",{attrs:{permanent:""}},[s("v-toolbar",{attrs:{flat:""}},[s("v-list",[s("v-list-tile-title",{staticClass:"title"},[t._v("\n            "+t._s(t.$t("admin.home"))+"\n          ")])],1)],1),t._v(" "),s("v-divider"),t._v(" "),s("v-list",{staticClass:"pt-0",attrs:{dense:""}},t._l(t.items,function(e){return s("v-list-tile",{key:e.title,attrs:{to:e.to}},[s("v-list-tile-action",[s("v-icon",[t._v(t._s(e.icon))])],1),t._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[t._v("\n              "+t._s(e.title)+"\n            ")])],1)],1)}))],1)],1),t._v(" "),s("v-flex",{staticStyle:{"margin-left":"15px"},attrs:{xs12:"",sm9:""}},[s("router-view")],1)],1)},staticRenderFns:[]},T=s("VU/8")({name:"admin-home",data:function(){return{items:[{title:this.$t("admin.users"),icon:"face",to:"/admin/users"},{title:this.$t("admin.products"),icon:"shopping_basket",to:"/admin/products"},{title:this.$t("admin.chart_orders"),icon:"bar_chart",to:"/admin/chart_orders"}]}}},R,!1,null,null,null).exports,q=s("woOf"),z=s.n(q),I=s("FfS/"),V={name:"admin-users-dialog",methods:{close:function(){this.$store.commit("toggleUsersDialog",{editMode:!1,user:{uid:null,email:"",username:""}})},add:function(){var t=this;this.userForEdit.uid=I.random.alphaNumeric(16),this.userForEdit.role="customer";var e=z()({},this.userForEdit);Jt.collection("users").doc(this.userForEdit.uid).set(e).then(function(){t.$store.commit("setAlertMessage",{show:!0,type:"success",message:t.$t("messages.saved",{item:t.$t("common.user")}),timeout:5e3}),t.close()})},update:function(){var t=this,e=z()({},this.userForEdit);Jt.collection("users").doc(e.uid).update(e).then(function(){t.$store.commit("setAlertMessage",{show:!0,type:"success",message:t.$t("messages.updated",{item:t.$t("common.user")}),timeout:5e3}),t.close()})}},computed:r()({usersDialog:{get:function(){return this.$store.getters.usersDialog},set:function(){this.close()}}},Object(g.c)(["userForEdit","userDialogEditMode"]))},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.usersDialog,callback:function(e){t.usersDialog=e},expression:"usersDialog"}},[s("v-btn",{staticClass:"indigo lighten-1 white--text text-xs-center mb-2",attrs:{slot:"activator",dark:""},slot:"activator"},[t._v("\n    "+t._s(t.$t("admin.usersTable.newUser"))+"\n  ")]),t._v(" "),s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[t._v("\n      "+t._s(t.$t("admin.usersTable.newUser"))+"\n    ")])]),t._v(" "),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{label:t.$t("auth.email")},model:{value:t.userForEdit.email,callback:function(e){t.$set(t.userForEdit,"email",e)},expression:"userForEdit.email"}})],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{label:t.$t("auth.username")},model:{value:t.userForEdit.username,callback:function(e){t.$set(t.userForEdit,"username",e)},expression:"userForEdit.username"}})],1)],1)],1)],1),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"indigo darken-1",flat:""},on:{click:t.close}},[t._v(t._s(t.$t("common.close")))]),t._v(" "),t.userDialogEditMode?s("v-btn",{attrs:{color:"indigo darken-1",flat:""},on:{click:t.update}},[t._v(t._s(t.$t("common.update")))]):s("v-btn",{attrs:{color:"indigo darken-1",flat:""},on:{click:t.add}},[t._v(t._s(t.$t("common.save")))])],1)],1)],1)},staticRenderFns:[]},O={name:"AdminUsers",components:{AdminUsersDialog:s("VU/8")(V,L,!1,null,null,null).exports},data:function(){return{headers:[{text:this.$t("admin.usersTable.uid"),value:"uid",align:"center"},{text:this.$t("admin.usersTable.email"),value:"email",align:"center"},{text:this.$t("admin.usersTable.username"),value:"username",align:"center"},{text:this.$t("common.actions"),value:"name",sortable:!1}],users:[],loading:!0}},mounted:function(){var t=this;this.loading=!0,Jt.collection("users").onSnapshot(function(e){t.users=[],e.forEach(function(e){var s=e.data();t.users.push({uid:s.uid,email:s.email,username:s.username||"------"})}),t.loading=!1},function(t){console.log("Listener userAdmin off...")})},methods:{editUser:function(t){this.$store.commit("toggleUsersDialog",{editMode:!0,user:t})},removeUser:function(t){var e=this;Jt.collection("users").doc(t.uid).delete().then(function(){e.$store.commit("setAlertMessage",{show:!0,type:"success",message:e.$t("messages.deleted",{item:e.$t("common.user")}),timeout:5e3})})}}},B={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("admin-users-dialog"),t._v(" "),s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.users,loading:t.loading,"no-data-text":t.$t("admin.usersTable.empty")},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.uid))]),t._v(" "),s("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.email))]),t._v(" "),s("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.username))]),t._v(" "),s("td",{staticClass:"justify-center layout px-0"},[s("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(s){t.editUser(e.item)}}},[s("v-icon",{attrs:{color:"teal"}},[t._v("edit")])],1),t._v(" "),s("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(s){t.removeUser(e.item)}}},[s("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)]}}])})],1)},staticRenderFns:[]},N=s("VU/8")(O,B,!1,null,null,null).exports,H={props:{value:{type:String},accept:{type:String,default:"*"},selectLabel:{type:String},removeLabel:{type:String}},data:function(){return{imageUrl:""}},watch:{value:function(t){this.imageUrl=t}},mounted:function(){this.imageUrl=this.value},methods:{onPickFile:function(){this.$refs.image.click()},onFilePicked:function(t){var e=this,s=t.target.files||t.dataTransfer.files;if(s&&s[0]){var o=s[0].name;if(o&&o.lastIndexOf(".")<=0)return;var a=new FileReader;a.addEventListener("load",function(){e.imageUrl=a.result}),a.readAsDataURL(s[0]),this.$emit("input",s[0])}},removeFile:function(){this.imageUrl=""}}},Y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("img",{ref:"imageUrl",staticStyle:{cursor:"pointer"},attrs:{src:t.imageUrl,height:"150"},on:{click:t.onPickFile}})]),t._v(" "),s("div",[t.imageUrl?s("v-btn",{staticClass:"error",attrs:{raised:""},on:{click:t.removeFile}},[t._v("\n      "+t._s(t.$t("admin.productsTable.remove"))+"\n    ")]):s("v-btn",{attrs:{raised:""},on:{click:t.onPickFile}},[t._v("\n      "+t._s(t.$t("admin.productsTable.select_image"))+"\n    ")]),t._v(" "),s("input",{ref:"image",attrs:{type:"file",name:"image",accept:t.accept},on:{change:t.onFilePicked}})],1)])},staticRenderFns:[]};var G={name:"admin-products-dialog",components:{FileInput:s("VU/8")(H,Y,!1,function(t){s("Hywb")},"data-v-11d9669e",null).exports},methods:{close:function(){this.$store.commit("toggleProductsDialog",{editMode:!1,product:{id:null,name:"",price:"",url:"",file_id:""}})},add:function(){var t=this;this.productForEdit.id=I.random.alphaNumeric(16);var e=z()({},this.productForEdit);e.createdAt=Date.now(),Jt.collection("products").doc(this.productForEdit.id).set(e).then(function(){t.image?t.$store.dispatch("pushFileToStorage",{fileToUpload:t.image,id:e.id}).then(function(){t._alertAndClose("saved")}):t._alertAndClose("saved")})},update:function(){var t=this,e=z()({},this.productForEdit);Jt.collection("products").doc(e.id).update(e).then(function(){t.image?(e.url&&t.$store.dispatch("removeFile",e).then(function(){t.$store.dispatch("updateDeletedProduct",e.id)}),t.$store.dispatch("pushFileToStorage",{fileToUpload:t.image,id:e.id}).then(function(){t._alertAndClose("updated")})):t._alertAndClose("updated")})},getUploadedFile:function(t){this.image=t},_alertAndClose:function(t){this.$store.commit("setAlertMessage",{show:!0,type:"success",message:this.$t("messages."+t,{item:this.$t("common.product")}),timeout:5e3}),this.close()}},computed:r()({productsDialog:{get:function(){return this.$store.getters.productsDialog},set:function(){this.close()}}},Object(g.c)(["productForEdit"]))},W={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.productsDialog,callback:function(e){t.productsDialog=e},expression:"productsDialog"}},[s("v-btn",{staticClass:"indigo lighten-1 white--text text-xs-center mb-2",attrs:{slot:"activator",dark:""},slot:"activator"},[t._v("\n    "+t._s(t.$t("admin.productsTable.newProduct"))+"\n  ")]),t._v(" "),s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[t._v(t._s(t.$t("admin.productsTable.newProduct")))])]),t._v(" "),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{label:t.$t("admin.productsTable.name")},model:{value:t.productForEdit.name,callback:function(e){t.$set(t.productForEdit,"name",e)},expression:"productForEdit.name"}})],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{label:t.$t("admin.productsTable.price")},model:{value:t.productForEdit.price,callback:function(e){t.$set(t.productForEdit,"price",e)},expression:"productForEdit.price"}})],1),t._v(" "),s("v-flex",{attrs:{xs12:""}},[t.productForEdit.url?s("a",{attrs:{href:t.productForEdit.url,target:"_blank"}},[t._v("\n              "+t._s(t.$t("admin.productsTable.openFile"))+"\n            ")]):t._e(),t._v(" "),s("file-input",{attrs:{accept:"image/*"},on:{input:t.getUploadedFile}})],1)],1)],1)],1),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("\n        "+t._s(t.$t("common.close"))+"\n      ")]),t._v(" "),t.$store.getters.productsDialogEditMode?s("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.update}},[t._v("\n        "+t._s(t.$t("common.update"))+"\n      ")]):s("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.add}},[t._v("\n        "+t._s(t.$t("common.save"))+"\n      ")])],1)],1)],1)},staticRenderFns:[]},X={components:{AdminProductsDialog:s("VU/8")(G,W,!1,null,null,null).exports},name:"admin-products",data:function(){return{headers:[{text:this.$t("admin.productsTable.id"),value:"id",align:"center"},{text:this.$t("admin.productsTable.name"),value:"name",align:"center"},{text:this.$t("admin.productsTable.price"),value:"price",align:"center"},{text:this.$t("common.actions"),value:"name",sortable:!1}],products:[],loading:!0}},mounted:function(){var t=this;this.loading=!0,Jt.collection("products").orderBy("createdAt").onSnapshot(function(e){t.products=[],e.forEach(function(e){var s=e.data();t.products.push({id:s.id,name:s.name,price:s.price,url:s.url||"",file_id:s.file_id||""})}),t.loading=!1},function(t){console.log("listener products admin off...")})},methods:{editProduct:function(t){this.$store.commit("toggleProductsDialog",{editMode:!0,product:t})},removeProduct:function(t){var e=this;Jt.collection("products").doc(t.id).delete().then(function(){t.url&&e.$store.dispatch("removeFile",t),e.$store.commit("setAlertMessage",{show:!0,type:"success",message:e.$t("messages.deleted",{item:e.$t("common.product")}),timeout:5e3})})}}},J={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("admin-products-dialog"),t._v(" "),s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.products,loading:t.loading,"no-data-text":t.$t("admin.productsTable.empty")},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.id))]),t._v(" "),s("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.name))]),t._v(" "),s("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.price))]),t._v(" "),s("td",{staticClass:"justify-center layout px-0"},[s("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(s){t.editProduct(e.item)}}},[s("v-icon",{attrs:{color:"teal"}},[t._v("edit")])],1),t._v(" "),s("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(s){t.removeProduct(e.item)}}},[s("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)]}}])})],1)},staticRenderFns:[]},K=s("VU/8")(X,J,!1,null,null,null).exports,Z=s("EbDR"),Q=s.n(Z),tt={name:"Product",props:{product:{type:Object,required:!0}}},et={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",[s("v-card-media",{attrs:{src:t.product.url,height:"300px"}}),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("span",[s("v-chip",{attrs:{label:"",color:"pink","text-color":"white"}},[s("v-icon",[t._v("label")]),t._v(t._s(t.product.name)+"\n      ")],1),t._v(" "),s("v-chip",{attrs:{label:"",outline:"",color:"red"}},[s("v-icon",[t._v("label")]),t._v(t._s(t.product.price)+"\n      ")],1)],1),t._v(" "),t.$store.getters.isCustomer?s("v-btn",{attrs:{icon:""},on:{click:function(e){t.$emit("addToCart")}}},[s("v-icon",[t._v("add_shopping_cart")])],1):t._e()],1)],1)},staticRenderFns:[]};var st=s("VU/8")(tt,et,!1,function(t){s("t33u")},"data-v-0ddefe03",null).exports,ot={name:"ProductSheet",props:{product:{type:Object,required:!0},sheet:{type:Boolean,default:!1}},mounted:function(){this.setActive(this.product)},methods:r()({},Object(g.b)(["updateCart"]),Object(g.d)({setActive:"setActiveProductInCart"})),computed:r()({},Object(g.c)(["qtyProductsInCart"]))},at={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-xs-center"},[s("v-bottom-sheet",{attrs:{persistent:""},model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[s("v-list",[s("v-subheader",[t._v("\n        "+t._s(t.$t("admin.productsTable.name"))+": "+t._s(t.product.price)+"\n      ")]),t._v(" "),s("v-list-tile",[s("v-list-tile-avatar",[s("v-avatar",{attrs:{size:"60",tile:""}},[s("img",{attrs:{src:t.product.url,alt:t.product.name}})])],1),t._v(" "),s("v-list-tile-title",[t._v("\n          "+t._s(t.product.name)+"\n        ")]),t._v(" "),s("v-spacer"),t._v(" "),s("v-list-tile-action",[s("v-btn",{attrs:{icon:""},on:{click:function(e){t.updateCart({type:"decrement",product:t.product})}}},[s("v-icon",[t._v("remove")])],1)],1),t._v(" "),s("v-list-tile-action",[t._v("\n          "+t._s(t.qtyProductsInCart)+"\n        ")]),t._v(" "),s("v-list-tile-action",[s("v-btn",{attrs:{icon:""},on:{click:function(e){t.updateCart({type:"increment",product:t.product})}}},[s("v-icon",[t._v("add")])],1)],1),t._v(" "),s("v-list-tile-action",{on:{click:function(e){t.$emit("closeSheet")}}},[s("v-btn",{attrs:{color:"error"}},[t._v("\n            "+t._s(t.$t("common.close"))+"\n          ")])],1)],1)],1)],1)],1)},staticRenderFns:[]},rt=s("VU/8")(ot,at,!1,null,null,null).exports,it={name:"Products",components:{InfiniteScroll:Q.a,Product:st,ProductSheet:rt},data:function(){return{loading:!1,productSheet:{},statusSheet:!1}},destroyed:function(){this.$store.commit("resetProductsPagination")},computed:{products:function(){return this.$store.state.shopModule.products},limit:function(){return this.$store.state.shopModule.limit}},methods:{openSheet:function(t){this.productSheet=t,this.statusSheet=!0,this.$store.commit("setActiveProductInCart",t)},fetchProducts:function(){var t=this;this.$store.state.shopModule.finish||(this.loading=!0,setTimeout(function(){t.$store.dispatch("fetchAllProductsPaginate").then(function(){t.loading=!1})},2e3))},changeLimit:function(t){this.limit!==t&&(this.$store.commit("resetProductsPagination"),this.$store.commit("updateLimitProductsPaginate",t),this.fetchProducts())},closeSheet:function(){this.statusSheet=!1}}},nt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-layout",{attrs:{column:""}},[s("v-flex",{attrs:{xs12:"",m6:""}},[s("v-toolbar",{attrs:{color:"indigo",dark:""}},[s("v-toolbar-title",[t._v(t._s(t.$t("shop.product_list")))]),t._v(" "),s("v-spacer"),t._v(" "),s("v-menu",{attrs:{origin:"center center",transition:"scale-transition",bottom:""}},[s("v-btn",{attrs:{slot:"activator",color:"accent",dark:""},slot:"activator"},[t._v("\n            "+t._s(t.$t("shop.products_qty"))+" ("+t._s(t.$store.state.shopModule.limit)+")\n            "+t._s(t.$t("shop.total_products"))+" ("+t._s(t.products.length)+")\n          ")]),t._v(" "),s("v-list",t._l([2,4,6,8,10,20,50],function(e,o){return s("v-list-tile",{key:o},[s("v-list-tile-title",{on:{click:function(s){t.changeLimit(e)}}},[t._v("\n                "+t._s(e)+"\n              ")])],1)}))],1)],1),t._v(" "),s("v-card",[s("v-container",{attrs:{fluid:"","grid-list-md":""}},[s("v-layout",{attrs:{row:"",wrap:""}},t._l(t.products,function(e){return s("v-flex",{key:e.name,class:"xs"+e.flex},[s("product",{attrs:{product:e},on:{addToCart:function(s){t.openSheet(e)}}})],1)}))],1)],1)],1)],1),t._v(" "),s("v-layout",{attrs:{row:""}},[s("infinite-scroll",{attrs:{handler:t.fetchProducts,"should-handle":!t.loading}}),t._v(" "),t.loading?s("v-progress-linear",{attrs:{color:"accent",indeterminate:""}}):t._e()],1),t._v(" "),s("product-sheet",{attrs:{product:t.productSheet,sheet:t.statusSheet},on:{closeSheet:t.closeSheet}})],1)},staticRenderFns:[]},ct=s("VU/8")(it,nt,!1,null,null,null).exports,lt={name:"cart",data:function(){return{headers:[{text:this.$t("admin.productsTable.id"),value:"id",align:"center",display:!1},{text:this.$t("admin.productsTable.name"),value:"name",align:"center"},{text:this.$t("admin.productsTable.price"),value:"price",align:"center"},{text:this.$t("admin.productsTable.qty"),value:"qty",align:"center"},{text:"",value:"name",sortable:!1}],totalProducts:0,products:[],loading:!0}},mounted:function(){var t=this;setTimeout(function(){t.products=t.$store.state.cartModule.cart,t.loading=!1},2e3)},methods:r()({},Object(g.b)(["updateCart","processOrder"]),{updateProduct:function(t,e){var s=this;this.loading=!0,this.updateCart({type:t,product:e}),setTimeout(function(){s.products=s.$store.state.cartModule.cart,s.loading=!1},1e3)},processCart:function(){var t=this;this.loading=!0,this.processOrder({products:this.products,totalCost:this.$store.getters.totalCostCart}).then(function(){t.$store.commit("setAlertMessage",{show:!0,type:"success",message:t.$t("messages.order_processed"),timeout:5e3}),t.$router.push("/orders")})}}),computed:{cartId:function(){return this.$store.state.cartModule.cartId}}},dt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.products,"total-items":t.totalProducts,loading:t.loading,"no-data-text":t.$t("admin.productsTable.empty"),"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.id))]),t._v(" "),s("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.name))]),t._v(" "),s("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.price))]),t._v(" "),s("td",{staticClass:"text-xs-center"},[t._v("x"+t._s(e.item.qty))]),t._v(" "),s("td",{staticClass:"justify-center layout px-0"},[s("v-btn",{staticClass:"mx-2",attrs:{icon:""},on:{click:function(s){t.updateProduct("decrement",e.item)}}},[s("v-icon",{attrs:{color:"pink"}},[t._v("remove")])],1),t._v(" "),s("v-btn",{staticClass:"mx-2",attrs:{icon:""},on:{click:function(s){t.updateProduct("increment",e.item)}}},[s("v-icon",{attrs:{color:"teal"}},[t._v("add")])],1)],1)]}}])},[t.loading?t._e():s("template",{slot:"footer"},[s("td",{staticClass:"text-xs-right",attrs:{colspan:"100%"}},[s("strong",[t._v(t._s(t.$t("shop.total_cost"))+" $"+t._s(t.$store.getters.totalCostCart))]),t._v(" "),s("v-btn",{attrs:{disabled:!t.products.length,color:"primary"},on:{click:t.processCart}},[t._v("\n          "+t._s(t.$t("shop.process_order"))+"\n        ")])],1)])],2)],1)},staticRenderFns:[]};var ut=s("VU/8")(lt,dt,!1,function(t){s("5GxX")},"data-v-78d23522",null).exports,mt={name:"Orders",data:function(){return{headers:[{text:"ID",value:"id",align:"center"},{text:this.$t("orders.products_qty"),value:"totalProducts",align:"center"},{text:this.$t("orders.cost"),value:"totalCost",align:"center"},{text:this.$t("orders.date"),value:"createdAt",align:"center"},{text:"",value:"name",sortable:!1}],loading:!0,orders:[]}},mounted:function(){var t=this;this.loading=!0,setTimeout(function(){Jt.collection("orders").where("customer_id","==",t.$store.state.authModule.user.uid).onSnapshot(function(e){e.empty||(t.orders=[],e.forEach(function(e){var s=e.data();t.orders.push({id:e.id,products:s.products,totalProducts:s.products.length,totalCost:s.totalCost,createdAt:s.createdAt})})),t.loading=!1},function(t){console.log("listener orders off...")})},1500)},methods:{orderDetail:function(t){this.$router.push({name:"OrderDetail",params:{id:t.id}})}}},vt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.orders,loading:t.loading,"no-data-text":t.$t("orders.empty")},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.id))]),t._v(" "),s("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.totalProducts))]),t._v(" "),s("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.totalCost)+" €")]),t._v(" "),s("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.createdAt))]),t._v(" "),s("td",{staticClass:"justify-center layout px-0"},[s("v-btn",{staticClass:"mx-2",attrs:{icon:""},on:{click:function(s){t.orderDetail(e.item)}}},[s("v-icon",{attrs:{color:"pink"}},[t._v("call_made")])],1)],1)]}}])})],1)},staticRenderFns:[]},pt=s("VU/8")(mt,vt,!1,null,null,null).exports,ht={name:"OrderDetail",data:function(){return{order:{}}},mounted:function(){var t=this,e=this.$route.params.id;Jt.doc("orders/"+e).get().then(function(e){var s=e.data();t.order={id:e.id,products:s.products,totalProducts:s.products.length,totalCost:s.totalCost,createdAt:s.createdAt}})}},ft={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-jumbotron",{attrs:{color:"blue-grey darken-4",dark:"",height:"100%"}},[s("v-container",[s("v-layout",{attrs:{"align-center":""}},[s("v-flex",[s("h1",{staticClass:"display-2"},[t._v(t._s(t.$t("orders.id"))+" "+t._s(t.order.id))]),t._v(" "),s("h3",{staticClass:"display-1"},[t._v(t._s(t.$t("orders.cost"))+" $"+t._s(t.order.totalCost))]),t._v(" "),s("span",{staticClass:"subheading"},[t._v(t._s(t.$t("orders.date"))+" "+t._s(t.order.createdAt))]),t._v(" "),s("v-divider",{staticClass:"my-3"}),t._v(" "),s("h4",{staticClass:"display-2"},[t._v(t._s(t.$t("admin.products")))]),t._v(" "),s("v-divider",{staticClass:"my-3"}),t._v(" "),t._l(t.order.products,function(e){return s("div",{staticClass:"title mb-3"},[t._v("\n          "+t._s(e.name)+" ("+t._s(e.qty)+")\n        ")])}),t._v(" "),s("v-btn",{staticClass:"mx-0",attrs:{large:"",color:"primary"},on:{click:function(e){t.$router.push("/orders")}}},[t._v("\n          "+t._s(t.$t("orders.return_orders_list"))+"\n        ")])],2)],1)],1)],1)},staticRenderFns:[]};var _t=s("VU/8")(ht,ft,!1,function(t){s("S3dq")},"data-v-1f2fab8d",null).exports,gt=s("gRE1"),bt=s.n(gt),xt=s("UlOv"),$t=xt.b.reactiveProp,yt={extends:xt.a,mixins:[$t],props:["options"],mounted:function(){this.renderChart(this.chartData,this.options)}},kt=s("M4fF"),jt=s("PJh5"),wt=s.n(jt),Ct={name:"AdminChartOrders",components:{LineChart:yt},data:function(){return{collectionData:null,orders:[],options:{scales:{yAxes:[{ticks:{stepSize:1,suggestedMin:0}}],xAxes:[{ticks:{callback:function(t){return wt.a.unix(t).format("DD/MM/YYYY")}}}]},tooltips:{callbacks:{label:function(t,e){var s=e.datasets[t.datasetIndex].money[t.index]||"",o=t.yLabel;return["Pedidos: "+o,"Ganancias: "+s]}}}}}},mounted:function(){this.fillData()},methods:{fillData:function(){var t=this;Jt.collection("orders").onSnapshot(function(e){t.orders=[],e.forEach(function(e){var s=e.data(),o=wt()(s.createdAt,"DD/MM/YYYY").unix(),a=kt.find(t.orders,{label:o});a?(a.value+=1,a.money+=parseFloat(s.totalCost)):t.orders.push({label:o,value:1,money:parseFloat(s.totalCost)})}),t.collectionData={labels:bt()(kt.mapValues(kt.sortBy(t.orders,"label"),"label")),datasets:[{label:"Pedidos de la tienda",backgroundColor:"#f87979",data:bt()(kt.mapValues(kt.sortBy(t.orders,"label"),"value")),money:bt()(kt.mapValues(kt.sortBy(t.orders,"label"),"money"))}]}})}}},Pt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",{attrs:{fluid:"","grid-list-md":""}},[e("line-chart",{attrs:{"chart-data":this.collectionData,options:this.options}})],1)},staticRenderFns:[]};var Ft=s("VU/8")(Ct,Pt,!1,function(t){s("28O5")},"data-v-5c4ea504",null).exports,Et=s("kxiW"),At=s.n(Et),Dt={state:{user:null,role:"guest",logged:!1},actions:{firebaseRegister:function(t,e){t.commit;return At.a.auth().createUserWithEmailAndPassword(e.email,e.password)},firebaseLogin:function(t,e){t.commit;return At.a.auth().signInWithEmailAndPassword(e.email,e.password)},firebaseLogout:function(){return At.a.auth().signOut()}},mutations:{setUser:function(t,e){e?(t.user={uid:e.uid,email:e.email},t.logged=!0):(t.user=null,t.logged=!1)},setRole:function(t,e){t.role=e}},getters:{logged:function(t){return!!t.user},role:function(t){return t.role},isCustomer:function(t){return"customer"===t.role}}},Ut={state:{admin:{products:{dialog:!1,editMode:!1,product:{id:null,name:"",price:"",file_id:"",url:""}}}},actions:{pushFileToStorage:function(t,e){t.commit;var s=e.fileToUpload,o=e.id,a=At.a.storage().ref(),r=I.random.alphaNumeric(16),i=a.child("/products/"+r).put(s);i.on(At.a.storage.TaskEvent.STATE_CHANGED,function(t){At.a.storage.UploadTaskSnapshot},function(t){console.log(t)},function(){s.url=i.snapshot.ref.getDownloadURL().then(function(t){return At.a.firestore().collection("products").doc(o).update({url:t,file_id:r})})})},removeFile:function(t,e){t.commit;return At.a.storage().ref().child("products/"+e.file_id).delete()},updateDeletedProduct:function(t,e){t.commit;var s=At.a.firestore().collection("products").doc(e);if(s)return s.update({url:"",file_id:""})}},mutations:{toggleProductsDialog:function(t,e){t.admin.products.dialog=!t.admin.products.dialog,t.admin.products.editMode=e.editMode,t.admin.products.product=e.product}},getters:{productsDialog:function(t){return t.admin.products.dialog},productForEdit:function(t){return t.admin.products.product},productsDialogEditMode:function(t){return t.admin.products.editMode}}},St=s("fZjL"),Mt=s.n(St),Rt={state:{products:[],last:1e5,limit:2,finish:!1},actions:{fetchAllProductsPaginate:function(t){var e=t.commit,s=t.state;s.finish||Jt.collection("products").limit(s.limit).where("createdAt",">",s.last).orderBy("createdAt","asc").onSnapshot(function(t){e("setProducts",t)},function(t){console.log("Listener products pagination is off...")})}},mutations:{setProducts:function(t,e){e.empty?t.finish=!0:(e.forEach(function(e){var s=e.data(),o={id:s.id,name:s.name,url:s.url,price:s.price,flex:6,createdAt:s.createdAt};!t.products.filter(function(t){return t.id===o.id}).length>0&&t.products.push(o)}),t.finish=!1,t.last=t.products.slice(-1)[0].createdAt)},resetProductsPagination:function(t){var e={products:[],last:1e5,limit:2,finish:!1};Mt()(e).forEach(function(s){t[s]=e[s]})},updateLimitProductsPaginate:function(t,e){t.limit=e}}},Tt={state:{cartId:null,cart:[],totalProducts:0,selectedProduct:null},actions:{createCartIfNotExist:function(t,e){var s=t.commit;t.state;Jt.collection("carts").doc(e.uid).onSnapshot(function(t){var o=void 0;t.exists?o=t.data():(o={products:[],totalProducts:0},Jt.collection("carts").doc(e.uid).set(o)),s("setCart",{cart:o,cartId:e.uid})},function(t){console.log("Listener cart off...")})},updateCart:function(t,e){var s=t.commit,o=t.state,a=Jt.collection("carts").doc(o.cartId),i=e.product;a.get().then(function(t){var o=t.data(),n=o.products,c=qt(n,"id",i.id);if(c)if("increment"===e.type)c.qty+=1,o.totalProducts+=1;else if(1===c.qty){var l=n.findIndex(function(t){return t.id===i.id});o.products=r()({},n.slice(0,l),n.slice(l+1)),o.totalProducts-=1}else c.qty-=1,o.totalProducts-=1;else"increment"===e.type&&(n.push({id:i.id,name:i.name,qty:1,price:i.price}),o.totalProducts+=1);a.update(o).then(function(){s("updateCart",o)})})}},mutations:{setCart:function(t,e){t.cart=e.cart.products,t.totalProducts=e.cart.totalProducts,t.cartId=e.cartId},updateCart:function(t,e){t.cart=e.products,t.totalProducts=e.totalProducts},setActiveProductInCart:function(t,e){t.selectedProduct=e},resetCart:function(t){var e={cartId:null,cart:[],totalProducts:0,selectedProduct:null};Mt()(e).forEach(function(s){"cartId"!==s&&(t[s]=e[s])})}},getters:{qtyProductsInCart:function(t){if(!t.selectedProduct)return 0;var e=t.cart.filter(function(e){return e.id===t.selectedProduct.id})[0];return e?e.qty:0},totalCostCart:function(t){var e=0;return t.cart.length&&t.cart.map(function(t){e+=parseFloat(t.price)*parseInt(t.qty)}),e}}},qt=function(t,e,s){for(var o=0;o<t.length;o++)if(t[o][e]===s)return t[o];return null},zt=s("//Fk"),It=s.n(zt),Vt={actions:{processOrder:function(t,e){var s=t.commit,o=t.rootState,a=I.random.alphaNumeric(16);Jt.collection("orders").doc(a).set({products:e.products,totalCost:e.totalCost,customer_id:o.authModule.user.uid,createdAt:jt(new Date).format("DD/MM/YYYY")}).then(function(){Jt.collection("carts").doc(o.authModule.user.uid).set({products:[],totalProducts:0}).then(function(){return s("resetCart"),It.a.resolve(!0)})})}}};o.default.use(g.a);var Lt=new g.a.Store({state:{processing:!1,loaded:!1,alert:{type:"success",show:!1,message:""}},mutations:{setLoaded:function(t,e){t.loaded=e},setAlertMessage:function(t,e){t.alert.type=e.type,t.alert.show=e.show,t.alert.message=e.message,setTimeout(function(){t.alert.type="success",t.alert.show=!1,t.alert.message=""},e.timeout)}},modules:{authModule:Dt,usersModule:{state:{dialog:!1,editMode:!1,user:{uid:null,email:"",username:""}},mutations:{toggleUsersDialog:function(t,e){t.dialog=!t.dialog,t.editMode=e.editMode,t.user=e.user}},getters:{usersDialog:function(t){return t.dialog},userForEdit:function(t){return t.user},userDialogEditMode:function(t){return t.editMode}}},productsModule:Ut,shopModule:Rt,cartModule:Tt,orderModule:Vt}});o.default.use(y.a);var Ot=function(t,e,s){Lt.state.authModule.logged?s({path:"/"}):s()},Bt=new y.a({routes:[{path:"/",name:"Home",component:j,meta:{Auth:!1,title:"Inicio"}},{path:"/register",name:"Register",component:D,meta:{Auth:!1,title:"Register"},beforeEnter:function(t,e,s){return Ot(0,0,s)}},{path:"/login",name:"Login",component:M,meta:{Auth:!1,title:"Login"},beforeEnter:function(t,e,s){return Ot(0,0,s)}},{path:"/admin",name:"Administración",component:T,meta:{Auth:!0,title:"Administración",role:"admin"},children:[{path:"users",component:N,meta:{Auth:!0,title:"Administrar usuarios"}},{path:"products",component:K,meta:{Auth:!0,title:"Administrar productos"}},{path:"chart_orders",component:Ft,meta:{Auth:!0,title:"Gráfica de pedidos"}}]},{path:"/shop",name:"Tienda",component:ct,meta:{Auth:!0,title:"Tienda"}},{path:"/cart",name:"Carrito",component:ut,meta:{Auth:!0,title:"Carrito"}},{path:"/orders",name:"Orders",component:pt,meta:{Auth:!0,title:"Pedidos"}},{path:"/orders/:id",name:"OrderDetail",component:_t,meta:{Auth:!0,title:"Detalle del pedido"}}]});Bt.beforeEach(function(t,e,s){if(document.title=t.meta.title,t.meta.Auth&&!Lt.state.authModule.logged&&Lt.state.loaded)s({path:"/login"});else{if(t.meta.role&&Lt.state.loaded&&t.meta.role!==Lt.state.authModule.role)return void s({path:"/"});s()}});var Nt=Bt,Ht=s("yviF"),Yt=s.n(Ht),Gt=(s("881v"),s("TXmL"));o.default.use(Gt.a);var Wt=new Gt.a({locale:"es",messages:{es:{messages:{processing:"Procesando la petición",accessDenied:"Acceso denegado",close:"Cerrar",saved:"El {item} se ha creado correctamente",updated:"El {item} se ha actualizado correctamente",deleted:"El {item} se ha eliminado correctamente",loading_more_products:"Cargando más productos...",order_processed:"El pedido se ha procesado correctamente :)"},common:{actions:"Acciones",update:"Actualizar",edit:"Editar",remove:"Eliminar",add:"Añadir",save:"Guardar",close:"Cerrar",user:"Usuario",product:"Producto"},languages:{es:"Español",en:"Inglés"},navigation:{admin:"Administración",login:"Iniciar sesión",register:"Registrarme",logout:"Cerrar sesión",my_account:"Mi cuenta",home:"Inicio",shop:"Tienda",language:"Selecciona el idioma",close_menu:"Cerrar menú",products_in_cart:"Carrito ({number})",cart:"Carrito",orders:"Mis pedidos"},welcome:{title:"Bienvenido a {app}",content:"En este curso aprenderás a utilizar Vuejs 2 + Firebase + Firestore para desarrollar aplicaciones en tiempo real con Vuetify desde 0",call_to_action:"Quiero saber más!",action_button:"Ver más"},auth:{email:"Correo electrónico",username:"Usuario",password:"Contraseña",password_confirmation:"Confirma la contraseña",error:"Error procesando el formulario: {error}"},login:{title:"Iniciar sesión",submit:"Acceder"},register:{title:"Registrarme en la plataforma",submit:"Registrarme"},validations:{required:"El {field} es requerido",minLength:"El {field} debe tener más de {length} caracteres",email:"{field} debe ser válido",password_confirmation:"Los passwords no coinciden"},admin:{information:"Administra la app",home:"Administración",products:"Productos",users:"Usuarios",chart_orders:"Gráfica de pedidos",usersTable:{newUser:"Añadir usuario",uid:"UID",email:"Correo electrónico",username:"Usuario",empty:"No hay usuarios disponibles"},productsTable:{newProduct:"Añadir producto",id:"ID",name:"Producto",price:"Precio",qty:"Cantidad",empty:"No hay productos disponibles",openFile:"Abrir imagen",select_image:"Selecciona una imagen",remove:"Eliminar"}},shop:{more_info:"Más información",product_list:"Listado de productos",products_qty:"Límite",total_products:"Total mostrados",process_order:"Procesar pedido",total_cost:"Coste total"},orders:{empty:"No hay pedidos disponibles",id:"Id del pedido",cost:"Coste del pedido",products_qty:"Cantidad de productos",date:"Fecha del pedido",return_orders_list:"Volver al listado de pedidos"}},en:{}}});s.d(e,"db",function(){return Jt}),Yt.a.initializeApp({apiKey:"AIzaSyBDn_CiPv8UrLfTb7ZvtQIOc8jZD6tqg78",authDomain:"courses-udemy.firebaseapp.com",databaseURL:"https://courses-udemy.firebaseio.com",projectId:"courses-udemy",storageBucket:"courses-udemy.appspot.com",messagingSenderId:"652891778139"});var Xt=Yt.a.firestore();Xt.settings({timestampsInSnapshots:!0});var Jt=Xt;s("rq+H"),o.default.config.productionTip=!1,new o.default({el:"#app",router:Nt,i18n:Wt,store:Lt,components:{App:$},template:"<App/>",mounted:function(){Yt.a.auth().onAuthStateChanged(function(t){t?Jt.collection("users").doc(t.uid).onSnapshot(function(e){Lt.commit("setUser",t),e.exists&&(Lt.commit("setRole",e.data().role),"customer"===e.data().role&&Lt.dispatch("createCartIfNotExist",t)),Lt.commit("setLoaded",!0)}):Lt.commit("setLoaded",!0)})}})},PP2P:function(t,e){},PYY3:function(t,e){},S3dq:function(t,e){},"rq+H":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("7+uW"),a=s("3EgV"),r=s.n(a),i=s("IHMs"),n=s.n(i),c=s("7zck");s.n(c);o.default.use(r.a,{theme:{primary:n.a.indigo.darken1,secondary:n.a.indigo.lighten4,accent:n.a.amber.base,error:n.a.red.accent3}})},t33u:function(t,e){},uslO:function(t,e,s){var o={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function a(t){return s(r(t))}function r(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}a.keys=function(){return Object.keys(o)},a.resolve=r,t.exports=a,a.id="uslO"}},["NHnr"]);
//# sourceMappingURL=app.d0c4ce32809c3a1f26b6.js.map